<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xavier's School For Gifted Youngsters Libarary | Book</title>
    <link rel="icon" href="/img/logo_gold.png">
    <!-- <link rel="stylesheet" type="text/css" href="/node_modules/semantic-ui/dist/semantic.min.css"> -->
    <link rel="stylesheet" type="text/css" href="/semantic/semantic-ui/dist/components/reset.css">
    <link rel="stylesheet" type="text/css" href="/semantic/semantic-ui/dist/components/container.css">
    <link rel="stylesheet" type="text/css" href="/semantic/semantic-ui/dist/components/site.css">
    <link rel="stylesheet" type="text/css" href="/semantic/semantic-ui/dist/components/header.css">
    <link rel="stylesheet" type="text/css" href="/semantic/semantic-ui/dist/components/button.css">
    <link rel="stylesheet" type="text/css" href="/semantic/semantic-ui/dist/components/list.css">
    <link rel="stylesheet" type="text/css" href="/semantic/semantic-ui/dist/components/image.css">
    <link rel="stylesheet" type="text/css" href="/semantic/semantic-ui/dist/components/form.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/dataTables.semanticui.min.js"></script>
    <script src="/semantic/semantic-ui/dist/components/form.js"></script>
    <script src="/semantic/semantic-ui/dist/components/transition.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/components/modal.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/semantic.css">
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.4/components/modal.min.css">
    <link rel="stylesheet" type="text/css" href="/css/books_bm.css">
    <!-- <script src="/node_modules/semantic-ui/dist/semantic.min.js"></script> -->
    <script src="/js/tablesort.js"></script>
    <script src="https://unpkg.com/sticky-table-headers"></script>
    <script type="text/javascript" src="/semantic/semantic-ui-calendar/dist/calendar.min.js"></script>
    <link rel="stylesheet" href="/semantic/semantic-ui-calendar/dist/calendar.min.css" />
    <script src="/semantic/semantic-ui-calendar/dist/calendar.js"></script>
    <script src="assets/library/jquery.min.js"></script>
    <script src="/semantic/semantic-ui/dist/components/visibility.js"></script>
    <script src="/semantic/semantic-ui/dist/components/sidebar.js"></script>
    <script src="/semantic/semantic-ui/dist/components/transition.js"></script>
    <script src="/js/book.js"></script>
    <script src={{timeout}}></script>
</head>
<body>
    <!-- Following Menu -->
    <!-- <div class="ui large top fixed hidden menu">
        <div class="ui container">
            <a class="active item">Books</a>
            <a class="item">Profile</a>
            <a class="item">Login</a>
        </div>
    </div> -->

    <!-- Sidebar Menu -->
    <div class="ui vertical inverted sidebar menu">
        <a class="active item" href="/">Books</a>
        <a class="item" href="/profile">Profile</a>
        <a class="item" href="logout">Logout</a>
    </div>

    <div class="container-main">
        <div class="ui vertical masthead center aligned segment">
            <div class="ui mobile stackable grid" style="width: inherit;">
                <div class="left aligned row" style="width: fit-content;">
                    <div class="four wide left aligned computer only column">
                        <div class="ui center aligned page image">
                            <img class="center" src="/img/logo_gold_big.png" alt="Logo Failed To Load"
                                style="width: 12em; height: 12em; margin-bottom: -8em; margin-left: 10em; margin-top: 0em;">
                        </div>
                    </div>
                    <div class="ui container">
                        <div class="ui large inverted secondary pointing six wide column menu"
                            style="border-color: transparent; background-color: transparent;">
                            <a class="toc item">
                                <i class="sidebar icon"></i>
                            </a>
                            <div class="ui center aligned container" style="width: min-content;">
                                <a class="active item" href="/">Books</a>
                                {{#each list}}
                                    <a href="{{link}}" class="item">{{text}}</a>
                                {{/each}}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="ui two row center aligned grid">
        <div class="row">
            <div class="ui two column center aligned stackable grid" style="margin-top: 5%;">
                <div class="four wide center aligned column">
                    <!-- <h1 class="ui huge center aligned icon container" style="margin-top: 1em;"> -->
                    <div class="row">
                        <div class="ui icon container"
                            style="border-width: 2px; border-color: black; margin-bottom: 4em;">
                            <i class="massive middle aligned book icon"></i>
                        </div>
                    </div>
                    <div class="center aligned middle aligned row" style="text-align: center;">
                        <div class="ui center aligned container" style="width: 80%;">
                            <div class="ui fluid large yellow button" id="button-addbookinstance"
                                style="background: rgb(184, 164, 56);" action="/manager/addBookInstance" method="POST">Add Book Instance</div>
                        </div>
                    </div>
                </div>
                <div class="eight wide column">
                    {{#with book}}
                    <div class="ui padded container">
                        <h1 class="ui left aligned header" id="book-title" style="margin-left: auto;">{{title}}</h1>
                        <div class="ui two column grid">
                            <div class="left aligned row" style="margin-bottom: -1em;">
                                <div class="six wide left aligned column">Author/s:</div>
                                {{#each author}}
                                {{#if @index}}, {{/if}}
                                <div class="ten wide left aligned column" id="book-author" style="font-weight: bolder;">{{firstname}} {{lastname}}</div>
                                {{/each}}
                            </div>
                            <div class="left aligned row" style="margin-bottom: -1em;">
                                <div class="six wide left aligned column">Publisher:</div>
                                <div class="ten wide left aligned column" id="book-publishinghouse" style="font-weight: bolder;">{{publisher}}</div>
                            </div>
                            <div class="left aligned row" style="margin-bottom: -1em;">
                                <div class="six wide left aligned column">Year of Publication:</div>
                                <div class="ten wide left aligned column" id="book-yearofpublication"
                                    style="font-weight: bolder;">{{year_of_publication}}</div>
                            </div>
                            <div class="left aligned row" style="margin-bottom: -1em;">
                                <div class="six wide left aligned column">ISBN:</div>
                                <div class="ten wide left aligned column" id="book-isbn"
                                    style="font-weight: bolder;">{{isbn}}
                                </div>
                            </div>
                            <div class="left aligned row" style="margin-bottom: -1em;">
                                <div class="six wide left aligned column">Call Number:</div>
                                <div class="ten wide left aligned column" id="book-callnumber"
                                    style="font-weight: bolder;">{{callNumber}}</div>
                            </div>
                            <div class="left aligned row" style="margin-bottom: -1em;">
                                <div class="six wide left aligned column">Date Added:</div>
                                <div class="ten wide left aligned column" id="book-dateadded"
                                    style="font-weight: bolder;">{{date_added}}</div>
                            </div>
                            {{!-- <div class="left aligned row" style="margin-bottom: -1em;">
                                <div class="six wide left aligned column">Status:</div>
                                <div class="ten wide left aligned column" id="book-status"
                                    style="font-weight: bolder;">
                                    Reserved
                                </div>
                            </div>
                            <div class="left aligned row" id="div-nextreservedate" style="margin-bottom: -1em; display: none;">
                                <div class="six wide left aligned column">Next Available Date:</div>
                                <div class="ten wide left aligned column" id="book-reservedate"
                                    style="font-weight: bolder;">05/13/2020</div>
                            </div> --}}
                        </div>
                    </div>
                    {{/with}}
                </div>
            </div>
        </div>
        <div class="row">
            <div class="ui container" style="margin-top: 5%; width: 70%;">
                <h3 class="ui large left aligned header" id="reviews">Book Instances</h3>
                <table class="ui sortable selectable celled table" id="table-bookinstances">
                    <thead class="sticky">
                        <tr>
                            <th class="sorted ascending" id="table-header">Book Instance Title</th>
                            <th id="table-header">Status</th>
                            <th id="table-header">Date Available</th>
                            <th id="table-header">Manage</th>
                            {{!-- <th class="" id="table-header">Status</th> --}}
                        </tr>
                    </thead>
                    <tbody>
                          {{#each instances}}
                        {{#if @index}}
                        <tr data-id="{{_id}}">
                            <td class="selectable"><a href="http://" id="td-bookinstance_title">{{@index}}. {{book.title}}</a>
                            </td>           
                            <td class="positive" id="td-bookinstance_status">{{status}}</td>
                            <td id="td-bookinstance_dateavailable">{{date_available}}</td>
                            <td class="ui computer only" id="td-bookinstancemanage" style="max-width: 150px;">
                                <div class="ui tiny yellow labeled icon edit instance button" id="button-editbookinstance"><i class="edit icon"></i>
                                    Edit
                                </div>
                                <div class="ui tiny labeled icon delete instance button" id="button-deletebookinstance"><i class="trash icon"></i>
                                    Delete
                                </div>
                            </td>
                        </tr>
                        {{/if}}
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="ui container" style="height: 420px; width: 70%;">
                <h3 class="ui large left aligned header" id="reviews">Reviews</h3>
                <div class="ui container padded segment" style="height: 300px; overflow-y: scroll;">
                    {{#each rev}}
                    <div class="ui container padded segment">        
                        <div class="ui divided two column stackable grid">
                            <div class="four wide center aligned middle aligned column">
                                {{#with user}}
                                <h4>{{firstname}} {{lastname}}</h4>
                                <h4>({{username}})</h4>
                                {{/with}}
                            </div>
                            <div class="twelve wide column">
                                <div class="row" id="date-posted" style="font-weight: lighter; margin-bottom: 0.5em;">
                                    {{create_date}}</div>
                                <div class="row" id="book-review">{{review_text}}</div>
                            </div>
                        </div>
                    </div>
                    {{/each}}
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Book Instance Modal -->
    <div class="ui small middle aligned scrolling coupled modal" id="modal-editbookinstance" style="overflow-y: scroll; overflow-x: hidden; max-height: 80%">
        <div class="header">
            Edit Book Instance
        </div>
        <div class="content">
            <h4 id="bookinstance-title">Book Instance Title</h4>
            <form class="ui small form" id="form-editbookinstance" action="/manager/editBookInstance" method="POST">
                <div class="ui stacked segment">
                    <div class="field" style="padding-left: 0.5em; padding-right: 0.5em;">
                        <div class="two fields">
                            <div class="field">
                                <div class="ui selection dropdown" id="dropdown-status">
                                    <input type="hidden" name="status">
                                    <i class="dropdown icon"></i>
                                    <div class="default text">Status</div>
                                    <div class="menu">
                                        <div class="item" data-value="status_available">Available</div>
                                        <div class="item" data-value="status_reserved">Reserved</div>
                                    </div>
                                </div>
                            </div>
                            <div class="field">
                                <div class="ui calendar" id="editdate_picker">
                                    <div class="ui input left icon">
                                        <i class="calendar icon"></i>
                                        <input type="text" name="editbookinstance_dateavailable" placeholder="Date Available">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div>
                            <input type="hidden" name="editbook_id">
                        </div>
                    </div>
                    {{!-- <div class="field">
                        <div class="ui calendar" id="editdate_picker">
                            <div class="ui input left icon">
                                <i class="calendar icon"></i>
                                <input type="text" name="editbook_dateadded" placeholder="Date Added">
                            </div>
                        </div>
                    </div> --}}
                    </div>
                    <!-- <div class="field" id="field-duedate">
                        <div class="ui calendar" id="date_picker-duedate">
                            <div class="ui input left icon">
                                <i class="calendar icon"></i>
                                <input type="text" placeholder="Due Date">
                            </div>
                        </div>
                    </div> -->
                    <div class="actions">
                        <div class="two fields" style="margin-top: 1.2em; padding-left: 0.5em; padding-right: 0.5em;">
                            <div class="ui yellow cancel button field" style="background: rgb(145, 145, 145); margin-right: 1em;">
                                Cancel</div>
                            <div class="ui yellow submit button field" id="button-confirmeditbook"
                                style="background: rgb(184, 164, 56);">
                                Edit Book Instance</div>
                        </div>
                    </div>
                <div class="ui error message" id="warnings"></div>
            </form>
        </div>
    </div>

    <!-- Delete Book Modal -->
    <div class="ui small basic modal" id="modal-deletebookinstance">
        <div class="header">
            Delete Book
        </div>
        <div class="content">
            Are you sure you want to delete this book?
        </div>
        <div class="actions">
            <div class="ui red basic cancel inverted button">
                <i class="remove icon"></i>
                No
            </div>
            <div class="ui green ok right inverted button" id="button-deleteinstance">
                <i class="checkmark icon"></i>
                Yes
            </div>
        </div>
    </div>

    <form class="ui reply form" id="form-addbookinstance" action="/manager/addBookInstance" method="POST">
        <div class="field" style="margin-bottom: 1em;">
            {{#with book}}
                <input type="hidden" name="bookID" value="{{_id}}"> 
            {{/with}}
        </div>
    </form>

</body>
</html>
